"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[102],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,h=m["".concat(s,".").concat(c)]||m[c]||d[c]||o;return a?n.createElement(h,i(i({ref:t},u),{},{components:a})):n.createElement(h,i({ref:t},u))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2322:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={title:"Routes",sidebar_position:1},i=void 0,l={unversionedId:"features/routes",id:"features/routes",title:"Routes",description:"This convention is still a work-in-progress and subject to breaking changes! Please contribute to the discussion if you have any ideas or suggestions on how we can improve the convention.",source:"@site/docs/features/routes.md",sourceDirName:"features",slug:"/features/routes",permalink:"/router/docs/features/routes",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Routes",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Features",permalink:"/router/docs/category/features"},next:{title:"Layouts",permalink:"/router/docs/features/layouts"}},s={},p=[{value:"App directory",id:"app-directory",level:2},{value:"Layout Routes",id:"layout-routes",level:2},{value:"Fragment Routes",id:"fragment-routes",level:2},{value:"Index Routes",id:"index-routes",level:2},{value:"Dynamic Routes",id:"dynamic-routes",level:2},{value:"Deep Dynamic Routes",id:"deep-dynamic-routes",level:2},{value:"Glossary",id:"glossary",level:2},{value:"Next",id:"next",level:2}],u={toc:p};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{title:"Request for Comments",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This convention is still a work-in-progress and subject to breaking changes! Please ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/expo/router/discussions/1"},"contribute to the discussion")," if you have any ideas or suggestions on how we can improve the convention.")),(0,r.kt)("p",null,"The file system-based routing convention enables developers to structure their app in a logic and intuitive way. Expo router uses this convention to optimize the app by generating native deep links and web routes automatically."),(0,r.kt)("p",null,"The convention is based on the concept of nesting routes inside each other to create shared UI elements like tab bars and headers across multiple children. This format should feel familiar to React developers."),(0,r.kt)("h2",{id:"app-directory"},"App directory"),(0,r.kt)("p",null,"The root level ",(0,r.kt)("inlineCode",{parentName:"p"},"app/")," directory is used to define all routes and screens in the app."),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(1659).Z,width:"2246",height:"1592"})),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Interoperability"),(0,r.kt)("p",null,"The app directory name could be customizable in the future, but that's not a priority as of now."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"app/")," directory is similar to the:"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"app/routes/")," directory in ",(0,r.kt)("a",{parentName:"li",href:"https://remix.run/docs/en/v1/guides/routing#defining-routes"},"Remix"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pages/")," directory in ",(0,r.kt)("a",{parentName:"li",href:"https://nextjs.org/docs/basic-features/pages"},"Next.js"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"src/routes/")," directory in ",(0,r.kt)("a",{parentName:"li",href:"https://kit.svelte.dev/docs/routing"},"SvelteKit"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"app/")," directory in the ",(0,r.kt)("a",{parentName:"li",href:"https://nextjs.org/blog/layouts-rfc#introducing-the-app-directory"},"Next.js layouts RFC"),".")),(0,r.kt)("p",null,"The entry file for classic Expo apps is ",(0,r.kt)("inlineCode",{parentName:"p"},"App.js"),", the Expo config file is ",(0,r.kt)("inlineCode",{parentName:"p"},"app.json")," (or ",(0,r.kt)("inlineCode",{parentName:"p"},"app.config.js"),"), and the Expo conference is called ",(0,r.kt)("strong",{parentName:"p"},"App.js conf")," so to keep things relatively consistent, the root directory is called ",(0,r.kt)("inlineCode",{parentName:"p"},"app/"),". Luckily, most web frameworks are also using ",(0,r.kt)("inlineCode",{parentName:"p"},"app/")," so it aligns well. This does mean you'll need a monorepo if you want to use Expo and another framework in the same repo.")),(0,r.kt)("h1",{id:"routes"},"Routes"),(0,r.kt)("p",null,"Routes are defined as files in the ",(0,r.kt)("inlineCode",{parentName:"p"},"app/")," directory that export a React component as ",(0,r.kt)("em",{parentName:"p"},"default"),". The file path is the route path."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"app/\n  index.js # Matches: \ud835\udf60.com/\n  home.js # Matches: \ud835\udf60.com/home\n  blog/posts.js # Matches: \ud835\udf60.com/blog/posts\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/index.js",title:"app/index.js"},'import { Text } from "react-native";\n\nexport default function Page() {\n  return <Text>First page</Text>;\n}\n')),(0,r.kt)("p",null,"This renders to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<App>\n  <Index />\n</App>\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You can use extensions: ",(0,r.kt)("inlineCode",{parentName:"li"},"js"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"tsx"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"ts"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"tsx"),". In a future iteration we will add support for any extension in the Metro config ",(0,r.kt)("a",{parentName:"li",href:"https://facebook.github.io/metro/docs/configuration#sourceexts"},(0,r.kt)("inlineCode",{parentName:"a"},"resolver.sourceExts")),"."),(0,r.kt)("li",{parentName:"ul"},"Any path in the ",(0,r.kt)("inlineCode",{parentName:"li"},"app/")," directory can be used as a root path. There are no global root paths."),(0,r.kt)("li",{parentName:"ul"},"Platform extensions like ",(0,r.kt)("inlineCode",{parentName:"li"},".ios.js")," or ",(0,r.kt)("inlineCode",{parentName:"li"},".native.ts")," are not currently supported in the ",(0,r.kt)("inlineCode",{parentName:"li"},"app/")," directory.")),(0,r.kt)("h2",{id:"layout-routes"},"Layout Routes"),(0,r.kt)("p",null,"To render shared navigation elements like a header, tab bar, or drawer, you can use a ",(0,r.kt)("strong",{parentName:"p"},"layout route"),".\nIf a ",(0,r.kt)("strong",{parentName:"p"},"route")," has a sibling directory by the same name, it will be used as the layout component for all the files in the respective directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"app/\n  stack.js # Layout route. This is where a header bar would go\n  stack/ # Children of stack.js\n    home.js # A child route of stack.js\n")),(0,r.kt)("p",null,"If a nested route does not have a layout route then a virtual, unstyled navigator will be generated in-memory to accommodate the child route:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"app/\n  stack/ # Unpaired layout route\n    home.js # Child route of a virtual navigator\n\n  stack.tsx # This file exists in-memory to render the `stack/home.js` route. Creating this file will override the in-memory route\n")),(0,r.kt)("p",null,"The virtual route system exists to accommodate native navigation which requires a parent navigator to render a child route."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Interoperability"),(0,r.kt)("p",null,"Nested routes are used to implement nested navigation in ",(0,r.kt)("a",{parentName:"p",href:"https://reactnavigation.org/docs/nesting-navigators"},"React Navigation"),"."),(0,r.kt)("p",null,"This convention is analogous to ",(0,r.kt)("a",{parentName:"p",href:"https://remix.run/docs/en/v1/guides/routing#what-is-nested-routing"},"nested routing")," (same format) in Remix.\nLayout routes are also similar to ",(0,r.kt)("inlineCode",{parentName:"p"},"pages/_app.js")," in Next.js.")),(0,r.kt)("h2",{id:"fragment-routes"},"Fragment Routes"),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(145).Z,width:"2332",height:"1500"})),(0,r.kt)("p",null,"Fragment routes add nested layout without appending any path segments. Think of them like ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," but as a layout. These are most commonly used for adding navigators like tab, stack, drawer, etc... The format is ",(0,r.kt)("inlineCode",{parentName:"p"},"(name).js")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"/(name)"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," is purely cosmetic and not provided to the route component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"app/\n  layout.js # Layout route\n  layout/\n    home.js # \ud835\udf60.com/layout/home\n\napp/\n  (layout).js # Fragment route\n  (layout)/\n    home.js # \ud835\udf60.com/home\n")),(0,r.kt)("p",null,"Both of these will render:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<App>\n  <Layout>\n    <Home />\n  </Layout>\n</App>\n")),(0,r.kt)("p",null,"Be careful when using parallel fragment routes as they can create conflicting matches. For example, the following routes will conflict:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"app/\n  profile.js # Matches /profile\n  (layout).js\n  (layout)/\n    profile.js # Matches /profile (conflict)\n")),(0,r.kt)("p",null,"Expo router will assert when there are route collisions."),(0,r.kt)("p",null,"The name 'Fragment' route is a nod to ",(0,r.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/fragments.html"},"React Fragments")," (",(0,r.kt)("inlineCode",{parentName:"p"},"<>{...}</>"),") which wrap components without adding any additional views to the hierarchy."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Previous iteration"),(0,r.kt)("p",null,"We originally considered using ",(0,r.kt)("inlineCode",{parentName:"p"},"index/")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"(index)/")," since the leaf variation is automatically collapsed. This was rejected because ",(0,r.kt)("inlineCode",{parentName:"p"},"/index/index")," was not a valid path for fragments but it was for leaf routes. Theoretically we should also be able to support multiple fragments in a single directory for swapping parent layouts.")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Interoperability"),(0,r.kt)("p",null,"The Fragment convention is similar to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Groups in ",(0,r.kt)("a",{parentName:"li",href:"https://kit.svelte.dev/docs/advanced-routing#advanced-layouts-group"},"SvelteKit")," (",(0,r.kt)("inlineCode",{parentName:"li"},"(group)"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://remix.run/docs/en/v1/guides/routing#pathless-layout-routes"},"pathless layout routes")," in Remix (",(0,r.kt)("inlineCode",{parentName:"li"},"__group"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nextjs.org/blog/layouts-rfc#route-groups"},"Route Groups")," in the upcoming Next.js layouts RFC (",(0,r.kt)("inlineCode",{parentName:"li"},"(group)"),")."))),(0,r.kt)("h2",{id:"index-routes"},"Index Routes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If a route is named ",(0,r.kt)("inlineCode",{parentName:"li"},"./index.js"),", it will add both ",(0,r.kt)("inlineCode",{parentName:"li"},"index")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"/")," to the route, effectively acting as a ",(0,r.kt)("a",{parentName:"li",href:"#fragment-routes"},"fragment route"),"."),(0,r.kt)("li",{parentName:"ul"},"Directories cannot be named ",(0,r.kt)("inlineCode",{parentName:"li"},"/index/"),". The filename ",(0,r.kt)("inlineCode",{parentName:"li"},"/index.js")," is reserved for ",(0,r.kt)("a",{parentName:"li",href:"#leaf-routes"},"leaf routes"),".")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Interoperability"),(0,r.kt)("p",null,"Index routes are based on the original ",(0,r.kt)("inlineCode",{parentName:"p"},"index.html")," system from the Tim Berners-Lee/Apache HTTP Server days.")),(0,r.kt)("h2",{id:"dynamic-routes"},"Dynamic Routes"),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(8416).Z,width:"2620",height:"970"})),(0,r.kt)("p",null,"Dynamic routes match any unmatched path at a given segment level. For example, ",(0,r.kt)("inlineCode",{parentName:"p"},"/blog/[id]")," is a dynamic route. The variable part (",(0,r.kt)("inlineCode",{parentName:"p"},"[id]"),') is called a "slug". Routes with higher specificity will be matched before a dynamic route. For example, ',(0,r.kt)("inlineCode",{parentName:"p"},"/blog/bacon")," will match ",(0,r.kt)("inlineCode",{parentName:"p"},"blog/bacon.js")," before ",(0,r.kt)("inlineCode",{parentName:"p"},"blog/[id].js"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"app/\n  blog/\n    [id].js # \ud835\udf60.com/blog/123\n")),(0,r.kt)("p",null,"The slug can be accessed as a prop in the route component:"),(0,r.kt)("admonition",{title:"Pending research",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"This convention is subject to breaking changes.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/blog/[id].js",title:"app/blog/[id].js"},"export default function BlogPost({ id }) {\n  return <Text>Blog post: {id}</Text>;\n}\n")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Interoperability"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"By ",(0,r.kt)("a",{parentName:"p",href:"https://twitter.com/Baconbrix/status/1567538444246589441"},"popular demand"),", the dynamic routes pattern is based on the ",(0,r.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/routing/dynamic-routes"},"Next.js dynamic routes")," system.")),(0,r.kt)("p",null,"There are a couple different ways to implement dynamic routes, here are some existing formats:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Format"),(0,r.kt)("th",{parentName:"tr",align:null},"Framework"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/blog/[id].js")),(0,r.kt)("td",{parentName:"tr",align:null},"Next.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/blog/[id].svelte")),(0,r.kt)("td",{parentName:"tr",align:null},"SvelteKit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/blog/$id.js")),(0,r.kt)("td",{parentName:"tr",align:null},"Remix")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Related")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://remix.run/docs/en/v1/routing/file-system-routing"},"Remix")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://reactrouter.com/web/guides/quick-start"},(0,r.kt)("inlineCode",{parentName:"a"},"react-router"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nextjs.org/blog/layouts-rfc"},"Next.js layouts RFC, pt. 1")))),(0,r.kt)("h2",{id:"deep-dynamic-routes"},"Deep Dynamic Routes"),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(9848).Z,width:"2830",height:"982"})),(0,r.kt)("p",null,"Similar to dynamic routes, but the slug matches any number of unmatched path components in a route. For example, ",(0,r.kt)("inlineCode",{parentName:"p"},"/blog/[...id]")," is a deep dynamic route where ",(0,r.kt)("inlineCode",{parentName:"p"},"[...id]")," is the slug. ",(0,r.kt)("inlineCode",{parentName:"p"},"blog/[...ids].js")," will match ",(0,r.kt)("inlineCode",{parentName:"p"},"/blog/1/2/3"),"."),(0,r.kt)("admonition",{title:"Pending research",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"This convention is subject to breaking changes.")),(0,r.kt)("p",null,"Directory names can also be deep dynamic routes. For example, ",(0,r.kt)("inlineCode",{parentName:"p"},"/blog/[...id]/home.js")," will match ",(0,r.kt)("inlineCode",{parentName:"p"},"/blog/1/2/3/home"),"."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Interoperability"),(0,r.kt)("p",null,"Deep dynamic routes are functionally analogous to the 'optional catch-all dynamic routes' (",(0,r.kt)("inlineCode",{parentName:"p"},"[[...id]].js"),") feature from Next.js but the syntax is the same as the 'required catch-all dynamic routes'. Unlike Next.js which has a separate syntax for matching everything except ",(0,r.kt)("inlineCode",{parentName:"p"},"/"),", Expo uses the same syntax for both. If you want to match everything except index, you can add an ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," file that has custom handling or you could simply handle the slug differently. We also reserve the term ",(0,r.kt)("strong",{parentName:"p"},"catch")," for error handling."),(0,r.kt)("p",null,"The convention is also similar to splats in Remix.")),(0,r.kt)("h2",{id:"glossary"},"Glossary"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Slug")," A dynamic URL path segment."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Child route")," A route that has no nested children, it shows up at the end of a URL.")),(0,r.kt)("h2",{id:"next"},"Next"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add custom handling for unmatched routes (404): ",(0,r.kt)("a",{parentName:"li",href:"/router/docs/features/unmatched"},"guide"))))}d.isMDXComponent=!0},9848:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/deep-dynamic-roots-0151fda87f78fe1f6de71b83c2bbaeeb.png"},8416:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dynamic-routes-cb9f27b700154739880401e226d5c8dd.png"},145:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/fragment-routes-e9cba4a4305463fa0f97b831d01a2366.png"},1659:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/main-2be921684c9120b088c9f748efb22fae.png"}}]);